{"version":3,"file":"esri-language.js","sources":["../node_modules/domose/domose.js","dependent-js/language.js"],"sourcesContent":["/* Speculative DOM Functionality\n/* ========================================================================== */\n\nfunction __assignSource(element, source, prefix) {\n\tfor (let key in source) {\n\t\tif ('function' === typeof source[key]) {\n\t\t\t// add functions as event listeners\n\t\t\telement.addEventListener(prefix + key, source[key]);\n\t\t} else if (Object(source[key]) === source[key]) {\n\t\t\t// assign objects as source\n\t\t\t__assignSource(element, source[key], `${prefix + key}-`);\n\t\t} else {\n\t\t\t// otherwise, set attributes\n\t\t\telement.setAttribute(prefix + key, source[key]);\n\t\t}\n\t}\n}\n\n/* Assign an element with attributes, events, and children\n/* ========================================================================== */\n\nfunction $assign(id) {\n\t// $assign(element, { class: 'btn', click: () => { /* listener */ } });\n\t// $assign('button', { aria: { label: 'title' } }, child);\n\t// $assign('div', child1, child2, 'a new text node');\n\t// $assign(document.createElementNS('http://www.w3.org/2000/svg', 'svg'));\n\n\tconst element = id instanceof Node ? id : document.createElement(id);\n\n\t[].slice.call(arguments, 1).forEach((source) => {\n\t\tif (source instanceof Node) {\n\t\t\t// append sources that are nodes\n\t\t\telement.appendChild(source);\n\t\t} else if ('string' === typeof source) {\n\t\t\t// append strings as text nodes\n\t\t\telement.appendChild(\n\t\t\t\tdocument.createTextNode(source)\n\t\t\t);\n\t\t} else {\n\t\t\t__assignSource(element, source, '');\n\t\t}\n\t});\n\n\treturn element;\n}\n\n/* Dispatch an event from an Element\n/* ========================================================================== */\n\nfunction $dispatchEvent(element, event) {\n\t// $dispatchEvent(element, new CustomEvent('foo', { bubbles: true }));\n\t// $dispatchEvent(element, 'foo', { bubbles: true });\n\n\treturn element.dispatchEvent(\n\t\tevent instanceof Event ? event : $CustomEvent(event, arguments[1])\n\t);\n}\n\n/* Replace all the children of a parent node with new children\n/* ========================================================================== */\n\nfunction $replaceAll(parentNode) {\n\t// $replaceAll(element);\n\t// $replaceAll(element, child1, child2);\n\n\twhile (parentNode.lastChild) {\n\t\tparentNode.removeChild(parentNode.lastChild);\n\t}\n\n\tparentNode.appendChild(\n\t\t__asFragment(arguments)\n\t);\n\n\treturn parentNode;\n}\n\n/* Wrap a child node within an element\n/* ========================================================================== */\n\nfunction $wrapWith(childNode, element) {\n\t// $wrapWith(element, wrappingElement);\n\n\tif (childNode.parentNode) {\n\t\tchildNode.parentNode.insertBefore(element, childNode).appendChild(childNode);\n\t}\n\n\treturn childNode;\n}\n\n/* Emerging DOM Functionality\n/* ========================================================================== */\n\nfunction __asFragment(nodes) {\n\tconst fragment = document.createDocumentFragment();\n\n\t[].slice.call(nodes, 1).forEach((node) => {\n\t\tif (node instanceof Node) {\n\t\t\tfragment.appendChild(node);\n\t\t} else {\n\t\t\tfragment.appendChild(\n\t\t\t\tdocument.createTextNode(node)\n\t\t\t);\n\t\t}\n\t});\n\n\treturn fragment;\n}\n\n/* Insert nodes after a child node\n/* ========================================================================== */\n\nfunction $after(childNode) {\n\t// $after(element, sibling1, sibling2, 'a new text node');\n\n\tif (childNode.parentNode) {\n\t\tchildNode.parentNode.insertBefore(\n\t\t\t__asFragment(arguments),\n\t\t\tchildNode.nextSibling\n\t\t);\n\t}\n\n\treturn childNode;\n}\n\n/* Appends nodes to a parent node\n/* ========================================================================== */\n\nfunction $append(parentNode) {\n\t// $append(parentNode, child1, child2, 'a new text node');\n\n\tparentNode.append(\n\t\t__asFragment(arguments)\n\t);\n\n\treturn parentNode;\n}\n\n/* Insert nodes before an element\n/* ========================================================================== */\n\nfunction $before(element) {\n\t// $before(element, sibling1, sibling2, 'a new text node');\n\n\tif (element.parentNode) {\n\t\telement.parentNode.insertBefore(\n\t\t\t__asFragment(arguments),\n\t\t\telement\n\t\t);\n\t}\n\n\treturn element;\n}\n\n/* Return the closest ancestor element matching a given selector\n/* ========================================================================== */\n\nfunction $closest(element, selectors) {\n\t// $closest(element, selectors);\n\n\tlet target = element;\n\n\twhile (target && 1 === target.nodeType) {\n\t\tif ($matches(target, selectors)) {\n\t\t\treturn target;\n\t\t}\n\n\t\ttarget = target.parentNode;\n\t}\n\n\treturn null;\n}\n\n/* Return whether or not a DOM element matches a given selector\n/* ========================================================================== */\n\nfunction $matches(element, selectors) {\n\t// $matches(element, selectors);\n\n\tconst elements = element.parentNode.querySelectorAll(selectors);\n\n\tlet index = 0;\n\n\twhile (elements[index] && elements[index] !== element) {\n\t\t++index;\n\t}\n\n\treturn Boolean(elements[index]);\n}\n\n/* Prepends a child to a parent node\n/* ========================================================================== */\n\nfunction $prepend(parentNode) {\n\t// $prepend(element, child1, child2, 'a new text node');\n\n\tparentNode.insertBefore(\n\t\t__asFragment(arguments),\n\t\tparentNode.firstChild\n\t);\n\n\treturn parentNode;\n}\n\n/* Remove a child node from its parent\n/* ========================================================================== */\n\nfunction $remove(childNode) {\n\t// $remove(element);\n\n\tif (childNode.parentNode) {\n\t\tchildNode.parentNode.removeChild(childNode);\n\t}\n\n\treturn childNode;\n}\n\n/* Replace a child node with nodes\n/* ========================================================================== */\n\nfunction $replaceWith(childNode) {\n\t// $replaceWith(element, sibling1, sibling2, 'a new text node');\n\n\tif (childNode.parentNode) {\n\t\tchildNode.parentNode.replaceChild(\n\t\t\t__asFragment(arguments),\n\t\t\tchildNode\n\t\t);\n\t}\n\n\treturn childNode;\n}\n\n/* Emerging Event Functionality\n/* ========================================================================== */\n\n/* Create a new CustomEvent\n/* ========================================================================== */\n\nfunction $CustomEvent(type) {\n\t// element.dispatchEvent(new $CustomEvent('click', { bubbles: true }));\n\n\tconst event = document.createEvent('CustomEvent');\n\tconst param = Object(arguments[1]) || { bubbles: false, cancelable: false, detail: undefined };\n\n\tevent.initCustomEvent(type, param.bubbles, param.cancelable, param.detail);\n\n\treturn event;\n}\n\n/* Fetch response text from a URL and pass it to a callback\n/* ========================================================================== */\n\nfunction $fetch(url, callback) {\n\t// $fetch('api?foo=bar', (responseText) => {});\n\n\tconst xhr = new XMLHttpRequest();\n\n\txhr.addEventListener('readystatechange', () => {\n\t\tif (4 === xhr.readyState && 200 === xhr.status) {\n\t\t\tcallback(xhr.responseText); // eslint-disable-line callback-return\n\t\t}\n\t});\n\n\txhr.open('GET', url);\n\txhr.send();\n\n\treturn xhr;\n}\n\n/* Export\n/* ========================================================================== */\n\nexport {\n\t$assign,\n\t$after,\n\t$append,\n\t$before,\n\t$closest,\n\t$CustomEvent,\n\t$dispatchEvent,\n\t$fetch,\n\t$matches,\n\t$prepend,\n\t$remove,\n\t$replaceAll,\n\t$replaceWith,\n\t$wrapWith\n};\n","import { $assign as $ } from 'esri-global-shared';\n\n/* Language\n/* ========================================================================== */\n\nexport default (data) => {\n\tconst $choice = $('select',\n\t\t{\n\t\t\tclass: `${data.prefix}-choice`,\n\t\t\tautofocus: '',\n\t\t\taria: { label: data.optionsLabel }\n\t\t},\n\t\t...data.options.map(\n\t\t\t(option) => $('option', { value: option.value }, option.label)\n\t\t)\n\t);\n\n\tconst $language = $('form', {\n\t\tclass: data.prefix,\n\t\taria: { labelledby: `${data.prefix}-message`, describedby: 'dialog-description' }\n\t},\n\t\t$('p', { class: `${data.prefix}-message`, id: `${data.prefix}-message` },\n\t\t\t$('strong', data.greetingLabel),\n\t\t\t' ',\n\t\t\tdata.messageLabel\n\t\t),\n\t\t$choice,\n\t\t$('button', {\n\t\t\tclass: `${data.prefix}-submit`,\n\t\t\ttype: 'submit',\n\t\t\taria: { label: `${ data.submitLabel } ${ data.optionsLabel }` }\n\t\t}, data.submitLabel)\n\t);\n\n\t$language.addEventListener('submit', (event) => {\n\t\tevent.preventDefault();\n\n\t\twindow.location.href = $choice.value;\n\t});\n\n\treturn $language;\n};\n"],"names":["__assignSource","element","source","prefix","key","addEventListener","Object","setAttribute","$assign","id","Node","document","createElement","slice","call","arguments","forEach","appendChild","createTextNode","data","$choice","$","label","optionsLabel","options","map","option","value","$language","labelledby","describedby","class","greetingLabel","messageLabel","submitLabel","event","preventDefault","location","href"],"mappings":"yCAGA,SAASA,EAAeC,EAASC,EAAQC,OACnC,IAAIC,KAAOF,EACX,mBAAsBA,EAAOE,KAExBC,iBAAiBF,EAASC,EAAKF,EAAOE,IACpCE,OAAOJ,EAAOE,MAAUF,EAAOE,KAE1BH,EAASC,EAAOE,GAASD,EAASC,SAGzCG,aAAaJ,EAASC,EAAKF,EAAOE,IAQ7C,SAASI,EAAQC,OAMVR,EAAUQ,aAAcC,KAAOD,EAAKE,SAASC,cAAcH,YAE9DI,MAAMC,KAAKC,UAAW,GAAGC,QAAQ,SAACd,GAChCA,aAAkBQ,OAEbO,YAAYf,GACV,iBAAoBA,IAEtBe,YACPN,SAASO,eAAehB,MAGVD,EAASC,EAAQ,MAI3BD,+ICtCQkB,OACTC,EAAUC,gBAAE,gBAENF,EAAKhB,2BACJ,SACHmB,MAAOH,EAAKI,yBAElBJ,EAAKK,QAAQC,IACf,SAACC,UAAWL,EAAE,UAAYM,MAAOD,EAAOC,OAASD,EAAOJ,YAIpDM,EAAYP,EAAE,cACZF,EAAKhB,aACJ0B,WAAeV,EAAKhB,kBAAkB2B,YAAa,uBAE3DT,EAAE,KAAOU,MAAUZ,EAAKhB,kBAAkBM,GAAOU,EAAKhB,mBACrDkB,EAAE,SAAUF,EAAKa,eACjB,IACAb,EAAKc,cAENb,EACAC,EAAE,gBACSF,EAAKhB,sBACT,eACEmB,MAAWH,EAAKe,gBAAiBf,EAAKI,eAC5CJ,EAAKe,uBAGC7B,iBAAiB,SAAU,SAAC8B,KAC/BC,wBAECC,SAASC,KAAOlB,EAAQO,QAGzBC","preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi9Vc2Vycy9qb25hdGhhbm5lYWwvR2l0SHViL0VzcmkvZXNyaS1nbG9iYWwtbmF2L25vZGVfbW9kdWxlcy9kb21vc2UvZG9tb3NlLmpzIiwiL1VzZXJzL2pvbmF0aGFubmVhbC9HaXRIdWIvRXNyaS9lc3JpLWdsb2JhbC1uYXYvbGFuZ3VhZ2UvZGVwZW5kZW50LWpzL2xhbmd1YWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIFNwZWN1bGF0aXZlIERPTSBGdW5jdGlvbmFsaXR5XG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG5mdW5jdGlvbiBfX2Fzc2lnblNvdXJjZShlbGVtZW50LCBzb3VyY2UsIHByZWZpeCkge1xuXHRmb3IgKGxldCBrZXkgaW4gc291cmNlKSB7XG5cdFx0aWYgKCdmdW5jdGlvbicgPT09IHR5cGVvZiBzb3VyY2Vba2V5XSkge1xuXHRcdFx0Ly8gYWRkIGZ1bmN0aW9ucyBhcyBldmVudCBsaXN0ZW5lcnNcblx0XHRcdGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihwcmVmaXggKyBrZXksIHNvdXJjZVtrZXldKTtcblx0XHR9IGVsc2UgaWYgKE9iamVjdChzb3VyY2Vba2V5XSkgPT09IHNvdXJjZVtrZXldKSB7XG5cdFx0XHQvLyBhc3NpZ24gb2JqZWN0cyBhcyBzb3VyY2Vcblx0XHRcdF9fYXNzaWduU291cmNlKGVsZW1lbnQsIHNvdXJjZVtrZXldLCBgJHtwcmVmaXggKyBrZXl9LWApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBvdGhlcndpc2UsIHNldCBhdHRyaWJ1dGVzXG5cdFx0XHRlbGVtZW50LnNldEF0dHJpYnV0ZShwcmVmaXggKyBrZXksIHNvdXJjZVtrZXldKTtcblx0XHR9XG5cdH1cbn1cblxuLyogQXNzaWduIGFuIGVsZW1lbnQgd2l0aCBhdHRyaWJ1dGVzLCBldmVudHMsIGFuZCBjaGlsZHJlblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblxuZnVuY3Rpb24gJGFzc2lnbihpZCkge1xuXHQvLyAkYXNzaWduKGVsZW1lbnQsIHsgY2xhc3M6ICdidG4nLCBjbGljazogKCkgPT4geyAvKiBsaXN0ZW5lciAqLyB9IH0pO1xuXHQvLyAkYXNzaWduKCdidXR0b24nLCB7IGFyaWE6IHsgbGFiZWw6ICd0aXRsZScgfSB9LCBjaGlsZCk7XG5cdC8vICRhc3NpZ24oJ2RpdicsIGNoaWxkMSwgY2hpbGQyLCAnYSBuZXcgdGV4dCBub2RlJyk7XG5cdC8vICRhc3NpZ24oZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdzdmcnKSk7XG5cblx0Y29uc3QgZWxlbWVudCA9IGlkIGluc3RhbmNlb2YgTm9kZSA/IGlkIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChpZCk7XG5cblx0W10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLmZvckVhY2goKHNvdXJjZSkgPT4ge1xuXHRcdGlmIChzb3VyY2UgaW5zdGFuY2VvZiBOb2RlKSB7XG5cdFx0XHQvLyBhcHBlbmQgc291cmNlcyB0aGF0IGFyZSBub2Rlc1xuXHRcdFx0ZWxlbWVudC5hcHBlbmRDaGlsZChzb3VyY2UpO1xuXHRcdH0gZWxzZSBpZiAoJ3N0cmluZycgPT09IHR5cGVvZiBzb3VyY2UpIHtcblx0XHRcdC8vIGFwcGVuZCBzdHJpbmdzIGFzIHRleHQgbm9kZXNcblx0XHRcdGVsZW1lbnQuYXBwZW5kQ2hpbGQoXG5cdFx0XHRcdGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHNvdXJjZSlcblx0XHRcdCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdF9fYXNzaWduU291cmNlKGVsZW1lbnQsIHNvdXJjZSwgJycpO1xuXHRcdH1cblx0fSk7XG5cblx0cmV0dXJuIGVsZW1lbnQ7XG59XG5cbi8qIERpc3BhdGNoIGFuIGV2ZW50IGZyb20gYW4gRWxlbWVudFxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblxuZnVuY3Rpb24gJGRpc3BhdGNoRXZlbnQoZWxlbWVudCwgZXZlbnQpIHtcblx0Ly8gJGRpc3BhdGNoRXZlbnQoZWxlbWVudCwgbmV3IEN1c3RvbUV2ZW50KCdmb28nLCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xuXHQvLyAkZGlzcGF0Y2hFdmVudChlbGVtZW50LCAnZm9vJywgeyBidWJibGVzOiB0cnVlIH0pO1xuXG5cdHJldHVybiBlbGVtZW50LmRpc3BhdGNoRXZlbnQoXG5cdFx0ZXZlbnQgaW5zdGFuY2VvZiBFdmVudCA/IGV2ZW50IDogJEN1c3RvbUV2ZW50KGV2ZW50LCBhcmd1bWVudHNbMV0pXG5cdCk7XG59XG5cbi8qIFJlcGxhY2UgYWxsIHRoZSBjaGlsZHJlbiBvZiBhIHBhcmVudCBub2RlIHdpdGggbmV3IGNoaWxkcmVuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG5mdW5jdGlvbiAkcmVwbGFjZUFsbChwYXJlbnROb2RlKSB7XG5cdC8vICRyZXBsYWNlQWxsKGVsZW1lbnQpO1xuXHQvLyAkcmVwbGFjZUFsbChlbGVtZW50LCBjaGlsZDEsIGNoaWxkMik7XG5cblx0d2hpbGUgKHBhcmVudE5vZGUubGFzdENoaWxkKSB7XG5cdFx0cGFyZW50Tm9kZS5yZW1vdmVDaGlsZChwYXJlbnROb2RlLmxhc3RDaGlsZCk7XG5cdH1cblxuXHRwYXJlbnROb2RlLmFwcGVuZENoaWxkKFxuXHRcdF9fYXNGcmFnbWVudChhcmd1bWVudHMpXG5cdCk7XG5cblx0cmV0dXJuIHBhcmVudE5vZGU7XG59XG5cbi8qIFdyYXAgYSBjaGlsZCBub2RlIHdpdGhpbiBhbiBlbGVtZW50XG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG5mdW5jdGlvbiAkd3JhcFdpdGgoY2hpbGROb2RlLCBlbGVtZW50KSB7XG5cdC8vICR3cmFwV2l0aChlbGVtZW50LCB3cmFwcGluZ0VsZW1lbnQpO1xuXG5cdGlmIChjaGlsZE5vZGUucGFyZW50Tm9kZSkge1xuXHRcdGNoaWxkTm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlbGVtZW50LCBjaGlsZE5vZGUpLmFwcGVuZENoaWxkKGNoaWxkTm9kZSk7XG5cdH1cblxuXHRyZXR1cm4gY2hpbGROb2RlO1xufVxuXG4vKiBFbWVyZ2luZyBET00gRnVuY3Rpb25hbGl0eVxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblxuZnVuY3Rpb24gX19hc0ZyYWdtZW50KG5vZGVzKSB7XG5cdGNvbnN0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXG5cdFtdLnNsaWNlLmNhbGwobm9kZXMsIDEpLmZvckVhY2goKG5vZGUpID0+IHtcblx0XHRpZiAobm9kZSBpbnN0YW5jZW9mIE5vZGUpIHtcblx0XHRcdGZyYWdtZW50LmFwcGVuZENoaWxkKG5vZGUpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRmcmFnbWVudC5hcHBlbmRDaGlsZChcblx0XHRcdFx0ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobm9kZSlcblx0XHRcdCk7XG5cdFx0fVxuXHR9KTtcblxuXHRyZXR1cm4gZnJhZ21lbnQ7XG59XG5cbi8qIEluc2VydCBub2RlcyBhZnRlciBhIGNoaWxkIG5vZGVcbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cbmZ1bmN0aW9uICRhZnRlcihjaGlsZE5vZGUpIHtcblx0Ly8gJGFmdGVyKGVsZW1lbnQsIHNpYmxpbmcxLCBzaWJsaW5nMiwgJ2EgbmV3IHRleHQgbm9kZScpO1xuXG5cdGlmIChjaGlsZE5vZGUucGFyZW50Tm9kZSkge1xuXHRcdGNoaWxkTm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShcblx0XHRcdF9fYXNGcmFnbWVudChhcmd1bWVudHMpLFxuXHRcdFx0Y2hpbGROb2RlLm5leHRTaWJsaW5nXG5cdFx0KTtcblx0fVxuXG5cdHJldHVybiBjaGlsZE5vZGU7XG59XG5cbi8qIEFwcGVuZHMgbm9kZXMgdG8gYSBwYXJlbnQgbm9kZVxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblxuZnVuY3Rpb24gJGFwcGVuZChwYXJlbnROb2RlKSB7XG5cdC8vICRhcHBlbmQocGFyZW50Tm9kZSwgY2hpbGQxLCBjaGlsZDIsICdhIG5ldyB0ZXh0IG5vZGUnKTtcblxuXHRwYXJlbnROb2RlLmFwcGVuZChcblx0XHRfX2FzRnJhZ21lbnQoYXJndW1lbnRzKVxuXHQpO1xuXG5cdHJldHVybiBwYXJlbnROb2RlO1xufVxuXG4vKiBJbnNlcnQgbm9kZXMgYmVmb3JlIGFuIGVsZW1lbnRcbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cbmZ1bmN0aW9uICRiZWZvcmUoZWxlbWVudCkge1xuXHQvLyAkYmVmb3JlKGVsZW1lbnQsIHNpYmxpbmcxLCBzaWJsaW5nMiwgJ2EgbmV3IHRleHQgbm9kZScpO1xuXG5cdGlmIChlbGVtZW50LnBhcmVudE5vZGUpIHtcblx0XHRlbGVtZW50LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKFxuXHRcdFx0X19hc0ZyYWdtZW50KGFyZ3VtZW50cyksXG5cdFx0XHRlbGVtZW50XG5cdFx0KTtcblx0fVxuXG5cdHJldHVybiBlbGVtZW50O1xufVxuXG4vKiBSZXR1cm4gdGhlIGNsb3Nlc3QgYW5jZXN0b3IgZWxlbWVudCBtYXRjaGluZyBhIGdpdmVuIHNlbGVjdG9yXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG5mdW5jdGlvbiAkY2xvc2VzdChlbGVtZW50LCBzZWxlY3RvcnMpIHtcblx0Ly8gJGNsb3Nlc3QoZWxlbWVudCwgc2VsZWN0b3JzKTtcblxuXHRsZXQgdGFyZ2V0ID0gZWxlbWVudDtcblxuXHR3aGlsZSAodGFyZ2V0ICYmIDEgPT09IHRhcmdldC5ub2RlVHlwZSkge1xuXHRcdGlmICgkbWF0Y2hlcyh0YXJnZXQsIHNlbGVjdG9ycykpIHtcblx0XHRcdHJldHVybiB0YXJnZXQ7XG5cdFx0fVxuXG5cdFx0dGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGU7XG5cdH1cblxuXHRyZXR1cm4gbnVsbDtcbn1cblxuLyogUmV0dXJuIHdoZXRoZXIgb3Igbm90IGEgRE9NIGVsZW1lbnQgbWF0Y2hlcyBhIGdpdmVuIHNlbGVjdG9yXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG5mdW5jdGlvbiAkbWF0Y2hlcyhlbGVtZW50LCBzZWxlY3RvcnMpIHtcblx0Ly8gJG1hdGNoZXMoZWxlbWVudCwgc2VsZWN0b3JzKTtcblxuXHRjb25zdCBlbGVtZW50cyA9IGVsZW1lbnQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9ycyk7XG5cblx0bGV0IGluZGV4ID0gMDtcblxuXHR3aGlsZSAoZWxlbWVudHNbaW5kZXhdICYmIGVsZW1lbnRzW2luZGV4XSAhPT0gZWxlbWVudCkge1xuXHRcdCsraW5kZXg7XG5cdH1cblxuXHRyZXR1cm4gQm9vbGVhbihlbGVtZW50c1tpbmRleF0pO1xufVxuXG4vKiBQcmVwZW5kcyBhIGNoaWxkIHRvIGEgcGFyZW50IG5vZGVcbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cbmZ1bmN0aW9uICRwcmVwZW5kKHBhcmVudE5vZGUpIHtcblx0Ly8gJHByZXBlbmQoZWxlbWVudCwgY2hpbGQxLCBjaGlsZDIsICdhIG5ldyB0ZXh0IG5vZGUnKTtcblxuXHRwYXJlbnROb2RlLmluc2VydEJlZm9yZShcblx0XHRfX2FzRnJhZ21lbnQoYXJndW1lbnRzKSxcblx0XHRwYXJlbnROb2RlLmZpcnN0Q2hpbGRcblx0KTtcblxuXHRyZXR1cm4gcGFyZW50Tm9kZTtcbn1cblxuLyogUmVtb3ZlIGEgY2hpbGQgbm9kZSBmcm9tIGl0cyBwYXJlbnRcbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cbmZ1bmN0aW9uICRyZW1vdmUoY2hpbGROb2RlKSB7XG5cdC8vICRyZW1vdmUoZWxlbWVudCk7XG5cblx0aWYgKGNoaWxkTm9kZS5wYXJlbnROb2RlKSB7XG5cdFx0Y2hpbGROb2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoY2hpbGROb2RlKTtcblx0fVxuXG5cdHJldHVybiBjaGlsZE5vZGU7XG59XG5cbi8qIFJlcGxhY2UgYSBjaGlsZCBub2RlIHdpdGggbm9kZXNcbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cbmZ1bmN0aW9uICRyZXBsYWNlV2l0aChjaGlsZE5vZGUpIHtcblx0Ly8gJHJlcGxhY2VXaXRoKGVsZW1lbnQsIHNpYmxpbmcxLCBzaWJsaW5nMiwgJ2EgbmV3IHRleHQgbm9kZScpO1xuXG5cdGlmIChjaGlsZE5vZGUucGFyZW50Tm9kZSkge1xuXHRcdGNoaWxkTm9kZS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChcblx0XHRcdF9fYXNGcmFnbWVudChhcmd1bWVudHMpLFxuXHRcdFx0Y2hpbGROb2RlXG5cdFx0KTtcblx0fVxuXG5cdHJldHVybiBjaGlsZE5vZGU7XG59XG5cbi8qIEVtZXJnaW5nIEV2ZW50IEZ1bmN0aW9uYWxpdHlcbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cbi8qIENyZWF0ZSBhIG5ldyBDdXN0b21FdmVudFxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblxuZnVuY3Rpb24gJEN1c3RvbUV2ZW50KHR5cGUpIHtcblx0Ly8gZWxlbWVudC5kaXNwYXRjaEV2ZW50KG5ldyAkQ3VzdG9tRXZlbnQoJ2NsaWNrJywgeyBidWJibGVzOiB0cnVlIH0pKTtcblxuXHRjb25zdCBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpO1xuXHRjb25zdCBwYXJhbSA9IE9iamVjdChhcmd1bWVudHNbMV0pIHx8IHsgYnViYmxlczogZmFsc2UsIGNhbmNlbGFibGU6IGZhbHNlLCBkZXRhaWw6IHVuZGVmaW5lZCB9O1xuXG5cdGV2ZW50LmluaXRDdXN0b21FdmVudCh0eXBlLCBwYXJhbS5idWJibGVzLCBwYXJhbS5jYW5jZWxhYmxlLCBwYXJhbS5kZXRhaWwpO1xuXG5cdHJldHVybiBldmVudDtcbn1cblxuLyogRmV0Y2ggcmVzcG9uc2UgdGV4dCBmcm9tIGEgVVJMIGFuZCBwYXNzIGl0IHRvIGEgY2FsbGJhY2tcbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cbmZ1bmN0aW9uICRmZXRjaCh1cmwsIGNhbGxiYWNrKSB7XG5cdC8vICRmZXRjaCgnYXBpP2Zvbz1iYXInLCAocmVzcG9uc2VUZXh0KSA9PiB7fSk7XG5cblx0Y29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cblx0eGhyLmFkZEV2ZW50TGlzdGVuZXIoJ3JlYWR5c3RhdGVjaGFuZ2UnLCAoKSA9PiB7XG5cdFx0aWYgKDQgPT09IHhoci5yZWFkeVN0YXRlICYmIDIwMCA9PT0geGhyLnN0YXR1cykge1xuXHRcdFx0Y2FsbGJhY2soeGhyLnJlc3BvbnNlVGV4dCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgY2FsbGJhY2stcmV0dXJuXG5cdFx0fVxuXHR9KTtcblxuXHR4aHIub3BlbignR0VUJywgdXJsKTtcblx0eGhyLnNlbmQoKTtcblxuXHRyZXR1cm4geGhyO1xufVxuXG4vKiBFeHBvcnRcbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cbmV4cG9ydCB7XG5cdCRhc3NpZ24sXG5cdCRhZnRlcixcblx0JGFwcGVuZCxcblx0JGJlZm9yZSxcblx0JGNsb3Nlc3QsXG5cdCRDdXN0b21FdmVudCxcblx0JGRpc3BhdGNoRXZlbnQsXG5cdCRmZXRjaCxcblx0JG1hdGNoZXMsXG5cdCRwcmVwZW5kLFxuXHQkcmVtb3ZlLFxuXHQkcmVwbGFjZUFsbCxcblx0JHJlcGxhY2VXaXRoLFxuXHQkd3JhcFdpdGhcbn07XG4iLCJpbXBvcnQgeyAkYXNzaWduIGFzICQgfSBmcm9tICdlc3JpLWdsb2JhbC1zaGFyZWQnO1xuXG4vKiBMYW5ndWFnZVxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblxuZXhwb3J0IGRlZmF1bHQgKGRhdGEpID0+IHtcblx0Y29uc3QgJGNob2ljZSA9ICQoJ3NlbGVjdCcsXG5cdFx0e1xuXHRcdFx0Y2xhc3M6IGAke2RhdGEucHJlZml4fS1jaG9pY2VgLFxuXHRcdFx0YXV0b2ZvY3VzOiAnJyxcblx0XHRcdGFyaWE6IHsgbGFiZWw6IGRhdGEub3B0aW9uc0xhYmVsIH1cblx0XHR9LFxuXHRcdC4uLmRhdGEub3B0aW9ucy5tYXAoXG5cdFx0XHQob3B0aW9uKSA9PiAkKCdvcHRpb24nLCB7IHZhbHVlOiBvcHRpb24udmFsdWUgfSwgb3B0aW9uLmxhYmVsKVxuXHRcdClcblx0KTtcblxuXHRjb25zdCAkbGFuZ3VhZ2UgPSAkKCdmb3JtJywge1xuXHRcdGNsYXNzOiBkYXRhLnByZWZpeCxcblx0XHRhcmlhOiB7IGxhYmVsbGVkYnk6IGAke2RhdGEucHJlZml4fS1tZXNzYWdlYCwgZGVzY3JpYmVkYnk6ICdkaWFsb2ctZGVzY3JpcHRpb24nIH1cblx0fSxcblx0XHQkKCdwJywgeyBjbGFzczogYCR7ZGF0YS5wcmVmaXh9LW1lc3NhZ2VgLCBpZDogYCR7ZGF0YS5wcmVmaXh9LW1lc3NhZ2VgIH0sXG5cdFx0XHQkKCdzdHJvbmcnLCBkYXRhLmdyZWV0aW5nTGFiZWwpLFxuXHRcdFx0JyAnLFxuXHRcdFx0ZGF0YS5tZXNzYWdlTGFiZWxcblx0XHQpLFxuXHRcdCRjaG9pY2UsXG5cdFx0JCgnYnV0dG9uJywge1xuXHRcdFx0Y2xhc3M6IGAke2RhdGEucHJlZml4fS1zdWJtaXRgLFxuXHRcdFx0dHlwZTogJ3N1Ym1pdCcsXG5cdFx0XHRhcmlhOiB7IGxhYmVsOiBgJHsgZGF0YS5zdWJtaXRMYWJlbCB9ICR7IGRhdGEub3B0aW9uc0xhYmVsIH1gIH1cblx0XHR9LCBkYXRhLnN1Ym1pdExhYmVsKVxuXHQpO1xuXG5cdCRsYW5ndWFnZS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZlbnQpID0+IHtcblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0d2luZG93LmxvY2F0aW9uLmhyZWYgPSAkY2hvaWNlLnZhbHVlO1xuXHR9KTtcblxuXHRyZXR1cm4gJGxhbmd1YWdlO1xufTtcbiJdLCJuYW1lcyI6WyJfX2Fzc2lnblNvdXJjZSIsImVsZW1lbnQiLCJzb3VyY2UiLCJwcmVmaXgiLCJrZXkiLCJhZGRFdmVudExpc3RlbmVyIiwiT2JqZWN0Iiwic2V0QXR0cmlidXRlIiwiJGFzc2lnbiIsImlkIiwiTm9kZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInNsaWNlIiwiY2FsbCIsImFyZ3VtZW50cyIsImZvckVhY2giLCJhcHBlbmRDaGlsZCIsImNyZWF0ZVRleHROb2RlIiwiZGF0YSIsIiRjaG9pY2UiLCIkIiwibGFiZWwiLCJvcHRpb25zTGFiZWwiLCJvcHRpb25zIiwibWFwIiwib3B0aW9uIiwidmFsdWUiLCIkbGFuZ3VhZ2UiLCJsYWJlbGxlZGJ5IiwiZGVzY3JpYmVkYnkiLCJjbGFzcyIsImdyZWV0aW5nTGFiZWwiLCJtZXNzYWdlTGFiZWwiLCJzdWJtaXRMYWJlbCIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJsb2NhdGlvbiIsImhyZWYiXSwibWFwcGluZ3MiOiJ5Q0FHQSxTQUFTQSxFQUFlQyxFQUFTQyxFQUFRQyxPQUNuQyxJQUFJQyxLQUFPRixFQUNYLG1CQUFzQkEsRUFBT0UsS0FFeEJDLGlCQUFpQkYsRUFBU0MsRUFBS0YsRUFBT0UsSUFDcENFLE9BQU9KLEVBQU9FLE1BQVVGLEVBQU9FLEtBRTFCSCxFQUFTQyxFQUFPRSxHQUFTRCxFQUFTQyxTQUd6Q0csYUFBYUosRUFBU0MsRUFBS0YsRUFBT0UsSUFRN0MsU0FBU0ksRUFBUUMsT0FNVlIsRUFBVVEsYUFBY0MsS0FBT0QsRUFBS0UsU0FBU0MsY0FBY0gsWUFFOURJLE1BQU1DLEtBQUtDLFVBQVcsR0FBR0MsUUFBUSxTQUFDZCxHQUNoQ0EsYUFBa0JRLE9BRWJPLFlBQVlmLEdBQ1YsaUJBQW9CQSxJQUV0QmUsWUFDUE4sU0FBU08sZUFBZWhCLE1BR1ZELEVBQVNDLEVBQVEsTUFJM0JELCtJQ3RDUWtCLE9BQ1RDLEVBQVVDLGdCQUFFLGdCQUVORixFQUFLaEIsMkJBQ0osU0FDSG1CLE1BQU9ILEVBQUtJLHlCQUVsQkosRUFBS0ssUUFBUUMsSUFDZixTQUFDQyxVQUFXTCxFQUFFLFVBQVlNLE1BQU9ELEVBQU9DLE9BQVNELEVBQU9KLFlBSXBETSxFQUFZUCxFQUFFLGNBQ1pGLEVBQUtoQixhQUNKMEIsV0FBZVYsRUFBS2hCLGtCQUFrQjJCLFlBQWEsdUJBRTNEVCxFQUFFLEtBQU9VLE1BQVVaLEVBQUtoQixrQkFBa0JNLEdBQU9VLEVBQUtoQixtQkFDckRrQixFQUFFLFNBQVVGLEVBQUthLGVBQ2pCLElBQ0FiLEVBQUtjLGNBRU5iLEVBQ0FDLEVBQUUsZ0JBQ1NGLEVBQUtoQixzQkFDVCxlQUNFbUIsTUFBV0gsRUFBS2UsZ0JBQWlCZixFQUFLSSxlQUM1Q0osRUFBS2UsdUJBR0M3QixpQkFBaUIsU0FBVSxTQUFDOEIsS0FDL0JDLHdCQUVDQyxTQUFTQyxLQUFPbEIsRUFBUU8sUUFHekJDIn0="}