var esriHeader=function(){"use strict";function e(t,n,a){for(var r in n)"function"==typeof n[r]?t.addEventListener(a+r,n[r]):Object(n[r])===n[r]?e(t,n[r],a+r+"-"):t.setAttribute(a+r,n[r])}function t(t){var n=t instanceof Node?t:document.createElement(t);return[].slice.call(arguments,1).forEach(function(t){t instanceof Node?n.appendChild(t):"string"==typeof t?n.appendChild(document.createTextNode(t)):e(n,t,"")}),n}function n(e){for(;e.lastChild;)e.removeChild(e.lastChild);return e.appendChild(a(arguments)),e}function a(e){var t=document.createDocumentFragment();return[].slice.call(e,1).forEach(function(e){e instanceof Node?t.appendChild(e):t.appendChild(document.createTextNode(e))}),t}function r(e,t){var n=new XMLHttpRequest;return n.addEventListener("readystatechange",function(){4===n.readyState&&200===n.status&&t(n.responseText)}),n.open("GET",e),n.send(),n}function i(e,t,n){var a=document.createEvent("CustomEvent");a.initCustomEvent(t,!0,!0,n),e.dispatchEvent(a)}function o(e){var t=void 0,n=[];e.addEventListener("blur",function(){n.forEach(function(e){e.removeAttribute("js-focus"),e.removeAttribute("js-focus-ring")})},!0),e.addEventListener("focus",function(){var e=document.activeElement;e instanceof Element&&(e.setAttribute("js-focus",""),t&&e.setAttribute("js-focus-ring",""),n.push(e))},!0),e.addEventListener("keydown",function(){t=clearTimeout(t)||setTimeout(function(){t=0},100)},!0)}function d(e,t){r(e,function(e){t(b(JSON.parse(e)))})}var c=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},l="esri-header-account",s=function(){var e=t("div",{class:l}),a=document.createTextNode(""),r=t("button",{class:l+"-control "+l+"-control--signin"},a);r.addEventListener("click",function(e){i(r,"header:click:signin",{event:e})});var o=t("img",{class:l+"-image"}),d=document.createTextNode(""),s=t("span",{class:l+"-name"},d),u=document.createTextNode(""),m=t("span",{class:l+"-id"},u),v=t("button",{class:l+"-control "+l+"-control--signedin",id:l+"-control",aria:{controls:l+"-menu",expanded:!1,haspopup:!0}},o,s,m);v.addEventListener("click",function(e){i(v,"header:click:account",{event:e}),i(v,"header:menu:toggle",{account:!0,control:v,content:A,state:"menu"})});var p=document.createTextNode(""),h=t("button",{class:l+"-content-toggle"},p);h.addEventListener("click",function(){i(h,"header:menu:close",{control:v,content:A})});var f=t("img",{class:l+"-content-image",role:"presentation"}),g=document.createTextNode(""),b=document.createTextNode(""),x=document.createTextNode(""),E=t("div",{class:l+"-content-info"},f,t("span",{class:l+"-content-name"},g),t("span",{class:l+"-content-id"},b),t("span",{class:l+"-content-group"},x)),w=t("ul",{class:l+"-content-menu",role:"navigation",aria:{labelledby:l+"-control"}}),L=document.createTextNode(""),k=t("button",{class:l+"-signin-control -switch"},L);k.addEventListener("click",function(e){i(k,"header:click:switch",{event:e})});var y=document.createTextNode(""),N=t("button",{class:l+"-signin-control -logout"},y);N.addEventListener("click",function(e){i(N,"header:click:signout",{event:e})});var C=t("ul",{class:l+"-signin-menu",role:"group"},t("li",{class:l+"-signin-item"},k),t("li",{class:l+"-signin-item"},N)),A=t("div",{class:l+"-menu",id:l+"-menu",role:"group",aria:{expanded:!1,hidden:!0}},h,E,w,C);return e.addEventListener("header:update:account",function(i){var s=i.detail;t(v,{aria:{label:s.label}}),p.nodeValue=s.label,a.nodeValue=s.controls.signin,L.nodeValue=s.controls.switch,y.nodeValue=s.controls.signout,s.user?(d.nodeValue=g.nodeValue=s.user.name,u.nodeValue=b.nodeValue=s.user.id,o.src=f.src=s.user.image,x.nodeValue=s.user.group,n.apply(void 0,[w].concat(c(s.menus.map(function(e){return t("li",{class:l+"-content-item"},t("a",{class:l+"-content-link",href:e.href},e.label))})))),n(e,v,A)):n(e,r)}),e},u="esri-header-brand",m=function(){var e=t(document.createElementNS("http://www.w3.org/2000/svg","svg"),{class:u+"-image"}),a=t("a",{class:u,id:u},e);return a.addEventListener("click",function(e){i(a,"header:click:brand",{event:e})}),a.addEventListener("header:update:brand",function(r){var i=r.detail;t(a,{href:i.href,aria:{label:i.label}}),t(e,{viewBox:"0 0 "+i.width+" "+i.height}),n.apply(void 0,[e].concat(c(i.image.map(function(e){return t(document.createElementNS("http://www.w3.org/2000/svg","path"),{d:e})}))))}),a},v="esri-header-menus",p=function(){var e=t("button",{class:v+"-toggle",id:v+"-toggle",aria:{controls:v+"-content",expanded:!1,haspopup:!0,labelledby:"esri-header-brand"}});e.addEventListener("click",function(t){i(e,"header:menu:toggle",{control:e,content:a,state:"menu",root:!0,event:t})});var a=t("div",{class:v+"-content",aria:{hidden:!0,expanded:!1}}),r=t("div",{class:v,id:v},e,a);return r.addEventListener("header:update:menus",function(e){var r=e.detail;n.apply(void 0,[a].concat(c(r.map(function(e,n){return t("div",{class:v+"-menu",role:"group"},t.apply(void 0,["ul",{class:v+"-list",role:"navigation",aria:{labelledby:"esri-header-brand"}}].concat(c(e.map(function(e,a){var r=t("a",{class:v+"-link",id:v+"-link-"+n+"-"+a,href:e.href||"javascript:;"},e.label);e.data&&r({data:e.data});var o=t("li",{class:v+"-item"},r),d=e.menus&&e.menus.length,l=e.tiles&&e.tiles.length;if(d||l){var s=t("button",{class:v+"-submenu-toggle"},e.label),u=t("div",{class:v+"-submenu",id:v+"-submenu-"+n+"-"+a,role:"group",aria:{hidden:!0,expanded:!1},data:{filled:e.menus.length>10?e.menus.slice(0,16).length:""}},s);d&&t(u,t.apply(void 0,["ul",{class:v+"-sublist",role:"navigation",aria:{labelledby:v+"-link-"+n+"-"+a}}].concat(c(e.menus.slice(0,16).map(function(e){var n=t("a",{class:v+"-sublink",href:e.href},e.label);return e.data&&t(n,{data:e.data}),e.newContext&&t(n,{target:"_blank",rel:"noopener"}),t("li",{class:v+"-subitem"},n)}))))),l&&t(u,t.apply(void 0,["ul",{class:v+"-sublist--featured",role:"navigation",aria:{labelledby:v+"-link-"+n+"-"+a},data:{filled:""+e.tiles.slice(0,4).length}}].concat(c(e.tiles.slice(0,4).map(function(e){var n=t("a",{class:v+"-sublink--featured",href:e.href},t(document.createElementNS("http://www.w3.org/2000/svg","svg"),e.width&&e.height?{viewBox:"0 0 "+e.width+" "+e.height}:{},{class:v+"-sublink-image"},t.apply(void 0,[document.createDocumentFragment()].concat(c(e.icon.map(function(e){return t(document.createElementNS("http://www.w3.org/2000/svg","path"),{d:e})}))))),t("span",{class:v+"-sublink-text"},e.label));return e.data&&t(n,{data:e.data}),e.newContext&&t(n,{target:"_blank",rel:"noopener"}),t("li",{class:v+"-subitem--featured"},n)}))))),t(o,u),r.addEventListener("click",function(){i(r,"header:menu:toggle",{control:r,content:u,submenu:!0,state:"menu"})}),s.addEventListener("click",function(){i(s,"header:menu:close",{control:r,submenu:!0,content:u})})}return o})))))}))))}),r},h=function(e){function n(n){n&&"reset"===n.type&&(o.value="");var a=o.value.trim();a!==v&&(v=a,i(u,e.prefix+":input",{value:v,event:n})),m&&!a?(m=!1,r.removeAttribute("data-filled"),s.removeAttribute("data-filled")):!m&&a&&(m=!0,t(r,{data:{filled:""}}),t(s,{data:{filled:""}})),d.nodeValue=a;var p=c.scrollWidth+"px";l.style.width=p}function a(t){i(u,e.prefix+":submit",{value:o.value,event:t})}var r=t("label",{class:e.prefix+"-label",for:e.prefix+"-query-control"},e.queryLabel),o=t("input",{class:e.prefix+"-control",id:e.prefix+"-control",type:"search",name:"q",autocapitalize:"off",autocomplete:"off",autocorrect:"off",spellcheck:"false"}),d=document.createTextNode(""),c=t("div",{class:e.prefix+"-measure-text",aria:{hidden:!0}},d),l=t("div",{class:e.prefix+"-measure"},c),s=t("button",{class:e.prefix+"-submit",type:"submit",aria:{label:e.submitLabel}}),u=t("form",{class:e.prefix+"-form",action:e.action,role:"search",aria:{label:e.label}},r,o,l,s);u.addEventListener(e.prefix+":focus",function(){o.focus()});var m=!1,v="";return u.addEventListener("DOMNodeInserted",function t(){u.parentNode&&(u.removeEventListener("DOMNodeInserted",t),i(u,e.prefix+":update",e))}),u.addEventListener(e.prefix+":update",function(){u.ownerDocument.defaultView.matchMedia(e.matchMedia||"(max-width: 720px)").addListener(n),o.addEventListener("input",n),u.addEventListener("reset",n),u.addEventListener("submit",a),u.addEventListener(e.prefix+":unload",onunload)}),u},f="esri-header-search",g=function(){var e=t(document.createElementNS("http://www.w3.org/2000/svg","svg"),{class:f+"-image",id:f+"-image"}),a=t("button",{class:f+"-control",id:f+"-control",aria:{expanded:!1,controls:f+"-content"}},e);a.addEventListener("click",function(e){i(a,"header:click:search",{event:e}),i(a,"header:menu:toggle",{control:a,content:r,state:"search",event:e})});var r=t("div",{class:f+"-content",id:f+"-content",aria:{expanded:!1,labelledby:f+"-control"}}),o=t("div",{class:f},a,r);return o.addEventListener("header:update:search",function(o){var d=o.detail;if(t(a,{aria:{label:d.label}}),"string"==typeof d.image?(e.removeAttribute("viewBox"),n(e,t("use",{href:d.image}))):n.apply(void 0,[e].concat(c(d.image.map(function(e){return t(document.createElementNS("http://www.w3.org/2000/svg","path"),{d:e})})))),d.dialog){d.dialog.prefix="esri-header-search-dialog";var l=h(d.dialog),s=t("button",{class:"esri-header-search-dialog-cancel",type:"reset"},t("span",d.dialog.cancelLabel));s.addEventListener("click",function(e){i(a,"header:menu:close",{control:a,content:r,state:"search",event:e})}),t(l,s),n(r,l),a.addEventListener("click",function(e){"true"===a.getAttribute("aria-expanded")&&i(l,d.dialog.prefix+":focus",{event:e})})}}),o},b=function(e){var a=void 0,r=void 0,d=void 0,c=void 0,l=t("button",{class:"esri-header-canvas",tabindex:"-1",data:{open:!1}});l.addEventListener("click",function(){i(l,"header:menu:close")});var u=m(),v=s(),h=p(),f=g(),b=t("div",{class:"esri-header-client"},v),x=t("div",{class:"esri-header -"+(e.theme||"web")},l,u,h,f,b);return o(x),x.addEventListener("header:update",function(e){var t=e.detail;t.brand&&i(u,"header:update:brand",t.brand),t.menus&&i(h,"header:update:menus",t.menus),t.search&&i(f,"header:update:search",t.search),t.account&&i(b.lastChild,"header:update:account",t.account),x.addEventListener("keydown",function(e){27===e.keyCode&&i(x,"header:menu:close")})}),x.addEventListener("header:menu:toggle",function(e){var t=e.detail,n="true"!==t.control.getAttribute("aria-expanded")?"header:menu:open":"header:menu:close";i(t.control,n,t)}),x.addEventListener("header:menu:open",function(e){var n=e.detail;n&&((a||r)&&i((a||r).control,"header:menu:close",a||r),t(n.control,{aria:{expanded:!0}}),t(n.content,{aria:{expanded:!0,hidden:!1}}),t(l,{data:{open:!0,state:n.state}}),t(x.ownerDocument.documentElement,{data:{"header-is-open":!0}}),n.root?r=n:a=n)}),x.addEventListener("header:menu:close",function(e){var n=e.detail;n?(t(n.control,{aria:{expanded:!1}}),t(n.content,{aria:{expanded:!1,hidden:!0}}),r&&!n.root&&"search"!==n.state||(t(l,{data:{open:!1}}),x.ownerDocument.documentElement.removeAttribute("data-header-is-open"))):(a&&(t(a.control,{aria:{expanded:!1}}),t(a.content,{aria:{expanded:!1,hidden:!0}}),a=null),r&&(t(r.control,{aria:{expanded:!1}}),t(r.content,{aria:{expanded:!1,hidden:!0}}),r=null),t(l,{data:{open:!1}}),x.ownerDocument.documentElement.removeAttribute("data-header-is-open"))}),x.addEventListener("DOMNodeInserted",function a(){function r(){var e=s.documentElement.clientWidth,t=s.documentElement.clientHeight,a=s.documentElement.scrollHeight;p=getComputedStyle(s.documentElement).overflowY.replace("visible",function(){return a>t?"scroll":"visible"}),n(m,":root{--esri-vw:"+e+"px;--esri-vh:"+t+"px}[data-header-is-open]{width:"+e+"px;height:"+t+"px;overflow-y:"+p+"}")}function o(){d.matches?(i(x,"header:breakpoint:s"),h.lastChild.appendChild(v)):(i(x,"header:breakpoint:not:s"),b.appendChild(v))}function l(){c.matches?(i(x,"header:breakpoint:sm"),t(h.lastChild,{aria:{hidden:"false"===h.lastChild.getAttribute("aria-expanded")}})):(i(x,"header:breakpoint:not:sm"),t(h.lastChild,{aria:{hidden:!1}}))}var s=x.ownerDocument,u=s.defaultView,m=t("style"),p=void 0;x.parentNode&&(x.removeEventListener("DOMNodeInserted",a),i(x,"header:update",e),t(s.head,m),u.addEventListener("orientationchange",r),u.addEventListener("resize",r),r(),d=u.matchMedia("(max-width: 767px)"),c=u.matchMedia("(max-width: 1023px)"),d.addListener(o),c.addListener(l),o(),l())}),x};return{create:b,createFromURL:d,createFromDefault:function(e){d("/esri-header.json",e)}}}();
//# sourceMappingURL=esri-header.js.map
